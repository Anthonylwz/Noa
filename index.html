<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noa - Creaciones Noa la mejor calidad</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery-bundle.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    html {
      scroll-behavior: smooth;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fadeIn 0.8s ease-out; }
    
    .product-card:hover .product-image { 
      transform: scale(1.05);
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));
    }
    
    .square-slider {
      aspect-ratio: 1/1;
      width: 90%;
      max-width: 600px;
      margin: 1rem auto;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      position: relative;
    }
    
    .square-slider .slide-image {
      object-fit: contain;
      padding: 15px;
      background: white;
      width: 100%;
      height: 100%;
    }
    
    .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    
    .slide.active {
      opacity: 1;
    }
    
    .contact-section {
      background: linear-gradient(45deg, #f8fafc, #e2e8f0);
    }
    
    .map-container {
      height: 400px;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .social-icon {
      transition: transform 0.3s ease, color 0.3s ease;
    }
    
    .social-icon:hover {
      transform: translateY(-3px);
    }
    
    .search-input {
      transition: all 0.3s ease;
    }
    
    .search-input:focus {
      box-shadow: 0 0 15px rgba(79, 70, 229, 0.3);
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      opacity: 0;
      transform: translateX(120%);
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }
    
    .notification.show {
      opacity: 1;
      transform: translateX(0);
    }

    /* NUEVAS ESTILIZACIONES AGREGADAS */
    /* Bot√≥n Volver Arriba */
    .back-to-top {
      position: fixed;
      bottom: 40px;
      right: 40px;
      background: #4F46E5;
      color: white;
      padding: 10px 15px;
      border-radius: 50%;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      z-index: 100;
    }
    .back-to-top.show {
      opacity: 1;
      visibility: visible;
    }
    /* Modo oscuro */
    .dark-mode {
      background-color: #1f2937 !important;
      color: #f3f4f6;
    }
    .dark-mode header,
    .dark-mode .contact-section,
    .dark-mode .product-card {
      background-color: #374151 !important;
    }
    .dark-mode .modal-content,
    .dark-mode .cart-content {
      background-color: #374151;
      color: #f3f4f6;
    }
    .dark-mode .search-input {
      background-color: #4b5563;
      color: #f3f4f6;
      border-color: #6b7280;
    }
    /* Bot√≥n Modo Oscuro */
    .dark-toggle {
      background: transparent;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .dark-toggle:hover {
      transform: rotate(20deg);
    }
  </style>
  
</head>
<body class="bg-gray-50">
  <header class="sticky top-0 bg-white shadow-lg z-50">
    <nav class="container mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
      <div class="flex items-center gap-4 w-full md:w-auto">
        <h1 class="text-2xl font-bold text-indigo-600">üßµ Noa</h1>
        <!-- Bot√≥n para Modo Oscuro -->
        <button id="darkModeToggle" class="dark-toggle" title="Cambiar modo">
          <i class="fas fa-moon"></i>
        </button>
      </div>
      <div class="flex items-center gap-4 w-full md:w-auto">
        <div class="relative flex-1 md:flex-none">
          <input type="text" 
                 id="searchInput"
                 class="search-input w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500"
                 placeholder="Buscar productos...">
          <button id="clearSearch" class="absolute right-3 top-2.5 text-gray-400 hover:text-indigo-600 hidden">
            √ó
          </button>
        </div>
        
        <div class="flex items-center space-x-6">
          <a href="#products" class="hover:text-indigo-600">Productos</a>
          <a href="#contact" class="hover:text-indigo-600">Contacto</a>
          <button id="cartBtn" class="relative">
            üõí <span class="cart-count absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center">0</span>
          </button>
        </div>
      </div>
    </nav>
  </header>

  <section class="square-slider">
    <div class="slide active">
      <img src="imagenes/faja1.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="slide">
      <img src="imagenes/tayta1.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="slide">
      <img src="imagenes/casaca1.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="slide">
      <img src="imagenes/justan1.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="slide">
      <img src="imagenes/justan2.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="slide">
      <img src="imagenes/bordado3.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="slide">
      <img src="imagenes/tayta2.jpg" alt="Artesan√≠a Peruana" class="slide-image">
    </div>
    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
      <div class="text-center text-white px-4">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 animate-fade-in">Noa</h2>
        <p class="text-lg">Creaciones Noa la mejor calidad</p>
      </div>
    </div>
  </section>

  <section id="products" class="container mx-auto px-6 py-16">
    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-8" id="productsContainer"></div>
  </section>

  <section id="contact" class="contact-section py-16 px-6">
    <div class="container mx-auto max-w-6xl">
      <h2 class="text-3xl font-bold text-center mb-12">Encu√©ntranos</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!4v1738624051564!6m8!1m7!1sksn7QMSMRx0cKY3ZC1qZpQ!2m2!1d-12.13537067680522!2d-75.2212022208018!3f109.76100324723733!4f5.687876658930293!5f0.7820865974627469" 
                  width="600" 
                  height="450" 
                  style="border:0;" 
                  allowfullscreen="" 
                  loading="lazy" 
                  referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
        <div class="flex flex-col justify-center">
          <div class="mb-8">
            <h3 class="text-xl font-bold mb-4">üìç Ubicaci√≥n</h3>
            <p class="text-gray-600">Av. Ricardo Palma<br>Huayucachi, Per√∫<br>üìû +51 964 202 204</p>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-4">üì± S√≠guenos</h3>
            <div class="flex space-x-6">
              <a href="https://facebook.com" target="_blank" class="social-icon text-blue-600 hover:text-blue-800" title="Facebook">
                <i class="fab fa-facebook fa-2x"></i>
              </a>
              <a href="https://instagram.com" target="_blank" class="social-icon text-pink-500 hover:text-pink-700" title="Instagram">
                <i class="fab fa-instagram fa-2x"></i>
              </a>
              <a href="https://wa.me/51964202204" target="_blank" class="social-icon text-green-500 hover:text-green-700" title="WhatsApp">
                <i class="fab fa-whatsapp fa-2x"></i>
              </a>
              <a href="https://tiktok.com" target="_blank" class="social-icon text-black hover:text-gray-800" title="TikTok">
                <i class="fab fa-tiktok fa-2x"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div id="productModal" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50">
    <div class="modal-content bg-white w-11/12 md:w-3/4 lg:w-1/2 mx-auto mt-20 p-8 rounded-lg relative">
      <button class="close-modal absolute top-4 right-4 text-2xl hover:text-red-500">√ó</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50">
    <div class="cart-content bg-white w-11/12 md:w-1/2 lg:w-1/3 mx-auto mt-20 p-6 rounded-lg relative">
      <button class="close-modal absolute top-4 right-4 text-2xl hover:text-red-500">√ó</button>
      <h3 class="text-xl font-bold mb-4">Tu Carrito üõí</h3>
      <div id="cartItems"></div>
      <div class="total-price text-right font-bold mt-4">Total: S/ <span>0</span></div>
      <button class="checkout-btn bg-indigo-600 text-white px-6 py-2 rounded-lg mt-4 w-full hover:bg-indigo-700">Pagar por WhatsApp</button>
    </div>
  </div>

  <div id="notification" class="notification bg-white p-4 rounded-lg shadow-lg border-l-4 border-indigo-500">
    <p class="text-sm font-semibold"></p>
  </div>

  <!-- Bot√≥n Volver Arriba -->
  <div id="backToTop" class="back-to-top" title="Volver arriba">
    <i class="fas fa-arrow-up"></i>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script>
  <script>
    const products = [
      {
        id: 1,
        name: "Justanes ",
        price: 280,
        category: "justanes",
        images: ['imagenes/justan1.jpg', 'https://via.placeholder.com/600x600/87CEFA/000?text=Detalle+Tejido'],
        details: "Just√°n tejido a mano con lana de alpaca, disponible en varios colores"
      },
      {
        id: 2,
        name: "Disfraz Tayta Ni√±o",
        price: 499,
        category: "disfraces",
        images: ['imagenes/tayta1.jpg', 'imagenes/tayta2.jpg'],
        details: "Traje tradicional para la fiesta de Tayta ni√±o"
      },
      {
        id: 3,
        name: "Casaca ",
        price: 650,
        category: "casacas",
        images: ['imagenes/casaca1.jpg', 'imagenes/casaca2.jpg'],
        details: "Casaca premium en lana de alpaca con forro interior"
      },
      {
        id: 4,
        name: "Fajas",
        price: 120,
        category: "fajas",
        images: ['imagenes/fajas2.jpg', 'https://via.placeholder.com/600x600/FF1493/000?text=Detalle+Tejido'],
        details: "Faja tradicional tejida a mano con dise√±os ancestrales"
      }
    ];

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');

    // Sistema de notificaciones
    function showNotification(message, duration = 3000) {
      const notification = document.getElementById('notification');
      notification.querySelector('p').textContent = message;
      notification.classList.add('show');
      setTimeout(() => notification.classList.remove('show'), duration);
    }

    // B√∫squeda en tiempo real
    function filterProducts(searchTerm) {
      const filtered = products.filter(product => 
        product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
        product.details.toLowerCase().includes(searchTerm.toLowerCase())
      );
      renderProducts(filtered);
    }

    // Control de cantidades
    function updateQuantity(index, operation) {
      if(operation === 'increment') {
        cart[index].quantity++;
      } else {
        cart[index].quantity > 1 ? cart[index].quantity-- : cart.splice(index, 1);
      }
      updateCart();
      showNotification('Carrito actualizado');
    }

    // Carga diferida de im√°genes
    function lazyLoadImages() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            observer.unobserve(img);
          }
        });
      });

      document.querySelectorAll('img[data-src]').forEach(img => observer.observe(img));
    }

    // Confirmaci√≥n de pedido
    function showOrderConfirmation() {
      const modalContent = `
        <div class="text-center p-6">
          <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
          <h2 class="text-2xl font-bold mb-2">¬°Pedido Confirmado!</h2>
          <p class="text-gray-600 mb-4">Hemos recibido tu pedido correctamente.</p>
          <button onclick="document.querySelector('.order-confirmation').remove()" 
                  class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">
            Continuar comprando
          </button>
        </div>
      `;
      
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 order-confirmation';
      modal.innerHTML = modalContent;
      document.body.appendChild(modal);
    }

    // Funciones principales
    function nextSlide() {
      slides[currentSlide].classList.remove('active');
      currentSlide = (currentSlide + 1) % slides.length;
      slides[currentSlide].classList.add('active');
    }

    function sendWhatsApp() {
      const phone = '964202204';
      const items = cart.map(item => `‚Ä¢ ${item.name} - S/${item.price} x ${item.quantity}`).join('%0A');
      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const message = `*Pedido de tienda Noa*%0A%0A${items}%0A%0A*Total:* S/${total}%0A%0A¬°Hola! Quiero realizar este pedido.`;
      
      window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
      showOrderConfirmation();
      cart = [];
      updateCart();
    }

    function updateCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
      document.querySelector('.cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
      
      const cartItems = document.getElementById('cartItems');
      cartItems.innerHTML = cart.map((item, index) => `
        <div class="cart-item flex justify-between items-center mb-3 p-2 bg-gray-50 rounded">
          <div class="flex items-center gap-3">
            <img src="${item.images[0]}" class="w-12 h-12 object-cover rounded" alt="${item.name}">
            <div>
              <h4 class="font-semibold">${item.name}</h4>
              <div class="flex items-center gap-2 mt-1">
                <button class="quantity-btn text-indigo-600 px-2" 
                        data-index="${index}" 
                        data-operation="decrement">‚àí</button>
                <span class="quantity">${item.quantity}</span>
                <button class="quantity-btn text-indigo-600 px-2" 
                        data-index="${index}" 
                        data-operation="increment">+</button>
              </div>
            </div>
          </div>
          <button class="remove-item text-red-500 hover:text-red-700" data-index="${index}">‚úï</button>
        </div>
      `).join('');

      document.querySelector('.total-price span').textContent = 
        cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

      document.querySelectorAll('.quantity-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const index = e.target.dataset.index;
          const operation = e.target.dataset.operation;
          updateQuantity(index, operation);
        });
      });
    }

    function openProductModal(e) {
      const productId = e.currentTarget.dataset.productId;
      const product = products.find(p => p.id == productId);
      
      const modalContent = `
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="lg-container">
            ${product.images.map(img => `
              <a href="${img}" class="gallery-item">
                <img data-src="${img}" 
                     class="w-full h-96 object-cover rounded-lg cursor-zoom-in" 
                     alt="${product.name}">
              </a>
            `).join('')}
          </div>
          <div>
            <h2 class="text-2xl font-bold mb-4">${product.name}</h2>
            <p class="text-gray-600 mb-4">${product.details}</p>
            <button class="add-to-cart bg-indigo-600 text-white px-6 py-3 rounded-lg w-full hover:bg-indigo-700"
                    data-product-id="${product.id}">
              üõí A√±adir al Carrito - S/ ${product.price}
            </button>
          </div>
        </div>
      `;

      document.getElementById('modalContent').innerHTML = modalContent;
      document.getElementById('productModal').classList.remove('hidden');
      lightGallery(document.querySelector('.lg-container'), { selector: '.gallery-item' });
      lazyLoadImages();
    }

    function renderProducts(productsArray = products) {
      const container = document.getElementById('productsContainer');
      container.innerHTML = productsArray.map(product => `
        <div class="product-card bg-white rounded-xl shadow-md overflow-hidden animate-fade-in">
          <div class="product-image relative group cursor-pointer h-80" 
               data-product-id="${product.id}"
               onclick="openProductModal(event)">
            <img data-src="${product.images[0]}" 
                 alt="${product.name}"
                 class="w-full h-full object-cover transition-transform duration-300">
          </div>
          <div class="p-4">
            <h3 class="font-bold text-lg mb-2">${product.name}</h3>
            <div class="flex justify-between items-center">
              <span class="text-indigo-600 font-bold">S/ ${product.price}</span>
              <button class="add-to-cart bg-indigo-100 text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-200"
                      data-product-id="${product.id}">
                üõí A√±adir
              </button>
            </div>
          </div>
        </div>
      `).join('');

      document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const productId = e.target.dataset.productId;
          const product = products.find(p => p.id == productId);
          const existingItem = cart.find(item => item.id === product.id);
          
          existingItem ? existingItem.quantity++ : cart.push({...product, quantity: 1});
          updateCart();
          showNotification(`${product.name} a√±adido al carrito`);
          // Efecto de "rebote" en el √≠cono del carrito
          document.getElementById('cartBtn').classList.add('animate-bounce');
          setTimeout(() => document.getElementById('cartBtn').classList.remove('animate-bounce'), 500);
        });
      });

      lazyLoadImages();
    }

    // EVENTOS
    // B√∫squeda en tiempo real
    searchInput.addEventListener('input', (e) => {
      clearSearch.style.display = e.target.value ? 'block' : 'none';
      filterProducts(e.target.value);
    });

    clearSearch.addEventListener('click', () => {
      searchInput.value = '';
      clearSearch.style.display = 'none';
      renderProducts(products);
    });

    // Cerrar modales al hacer click fuera o en el bot√≥n de cerrar
    document.addEventListener('click', (e) => {
      if (e.target.closest('.close-modal') || e.target.matches('#productModal, #cartModal')) {
        document.querySelectorAll('[id$="Modal"]').forEach(modal => modal.classList.add('hidden'));
      }
      
      if (e.target.classList.contains('remove-item')) {
        cart.splice(e.target.dataset.index, 1);
        updateCart();
        showNotification('Producto eliminado');
      }
      
      if (e.target.classList.contains('checkout-btn')) {
        sendWhatsApp();
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelectorAll('[id$="Modal"]').forEach(modal => modal.classList.add('hidden'));
      }
    });

    document.getElementById('cartBtn').addEventListener('click', () => {
      document.getElementById('cartModal').classList.remove('hidden');
    });

    // Smooth Scroll para los enlaces internos (Productos, Contacto, etc.)
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // Bot√≥n Volver Arriba
    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTop.classList.add('show');
      } else {
        backToTop.classList.remove('show');
      }
    });
    backToTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Toggle para Modo Oscuro
    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      // Cambiar √≠cono seg√∫n el modo
      darkModeToggle.innerHTML = document.body.classList.contains('dark-mode') 
        ? '<i class="fas fa-sun"></i>' 
        : '<i class="fas fa-moon"></i>';
    });

    // Inicializaci√≥n
    document.addEventListener('DOMContentLoaded', () => {
      setInterval(nextSlide, 3000);
      renderProducts();
      updateCart();
      lazyLoadImages();
    });
  </script>
</body>
</html>
